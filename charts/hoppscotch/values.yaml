################################################################################
## Global parameters
################################################################################

# -- This is for the secrets for pulling an image from a private repository.
# @section -- Global parameters
imagePullSecrets: []

################################################################################
## Common parameters
################################################################################

# -- This is to override the chart name.
# @section -- Common parameters
nameOverride: ""
# -- This is to override the fully qualified app name.
# @section -- Common parameters
fullnameOverride: ""

################################################################################
## Hoppscotch common parameters
################################################################################

# -- This will set the replicaset count.
# @section -- Hoppscotch common parameters
replicaCount: 1

# This sets the container image more information can be found here: https://kubernetes.io/docs/concepts/containers/images/
image:
  # -- This sets the image repository.
  # @section -- Hoppscotch common parameters
  repository: hoppscotch/hoppscotch
  # -- This sets the pull policy for images.
  # @section -- Hoppscotch common parameters
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion.
  # @section -- Hoppscotch common parameters
  tag: ""

# This section builds out the service account more information can be found here: https://kubernetes.io/docs/concepts/security/service-accounts/
serviceAccount:
  # -- Specifies whether a service account should be created
  # @section -- Hoppscotch common parameters
  create: true
  # -- Automatically mount a ServiceAccount's API credentials?
  # @section -- Hoppscotch common parameters
  automount: true
  # -- Annotations to add to the service account
  # @section -- Hoppscotch common parameters
  annotations: {}
  # -- The name of the service account to use. If not set and create is true, a name is generated using the fullname template
  # @section -- Hoppscotch common parameters
  name: ""

# -- This is for setting Kubernetes Annotations to a Pod.
# @section -- Hoppscotch common parameters
podAnnotations: {}
# -- This is for setting Kubernetes Labels to a Pod.
# @section -- Hoppscotch common parameters
podLabels: {}

podSecurityContext:
  {}
  # fsGroup: 2000

securityContext:
  {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# This is for setting up a service more information can be found here: https://kubernetes.io/docs/concepts/services-networking/service/
service:
  # -- This sets the service type.
  # @section -- Hoppscotch common parameters
  type: ClusterIP
  # -- This sets the ports.
  # @section -- Hoppscotch common parameters
  port: 80

# This block is for setting up the ingress for more information can be found here: https://kubernetes.io/docs/concepts/services-networking/ingress/
ingress:
  enabled: false
  className: ""
  annotations:
    {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- Resources for the pod. This is where you can set CPU and memory limits and requests.
# @section -- Hoppscotch common parameters
resources:
  {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- This is to setup the liveness and readiness probes.
# @section -- Hoppscotch common parameters
livenessProbe:
  {}
  # httpGet:
  #   path: /
  #   port: http
readinessProbe:
  {}
  # httpGet:
  #   path: /
  #   port: http

# -- This section is for setting up autoscaling.
# @section -- Hoppscotch common parameters
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# -- Additional volumes on the output Deployment definition.
# @section -- Hoppscotch common parameters
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# -- Additional volumeMounts on the output Deployment definition.
# @section -- Hoppscotch common parameters
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

# -- Node selector for pod assignment.
# @section -- Hoppscotch common parameters
nodeSelector: {}

# -- Tolerations for pod assignment.
# @section -- Hoppscotch common parameters
tolerations: []

# -- Affinity for pod assignment.
# @section -- Hoppscotch common parameters
affinity: {}

# -- Topology spread constraints for pod assignment.
# @section -- Hoppscotch common parameters
topologySpreadConstraints: []

################################################################################
## Hoppscotch frontend parameters
################################################################################

frontend:
  # -- This is the URL where your deployment will be accessible from
  # @section -- Hoppscotch frontend parameters
  baseUrl: ""
  # -- A URL to generate shortcodes for sharing, can be the same as `frontend.baseUrl`
  # @section -- Hoppscotch frontend parameters
  shortcodeBaseUrl: ""
  # -- This URL is used to connect to the admin dashboard
  # @section -- Hoppscotch frontend parameters
  adminUrl: ""

  # -- The URL for GraphQL within the instance
  # @section -- Hoppscotch frontend parameters
  backendGqlUrl: ""
  # -- The URL for WebSockets within the instance
  # @section -- Hoppscotch frontend parameters
  backendWsUrl: ""
  # -- The URL for REST APIs within the instance
  # @section -- Hoppscotch frontend parameters
  backendApiUrl: ""

  # -- Optional links to the Terms & Conditions
  # @section -- Hoppscotch frontend parameters
  appTosLink: ""
  # -- Optional links to the Privacy Policy
  # @section -- Hoppscotch frontend parameters
  appPrivacyPolicyLink: ""

  enableSubpathBasedAccess: true

################################################################################
## Hoppscotch backend parameters
################################################################################

backend:
  # -- This is where you add your Postgres database URL
  # @section -- Hoppscotch backend parameters
  databaseUrl: "postgres://hoppscotch:password@localhost:5432/hoppscotch?sslmode=disable"

  # -- This is an optional variable that lets you specify an alternate port for the AIO containerâ€™s endpoint when operating in subpath access mode
  # @section -- Hoppscotch backend parameters
  aioAlternatePort: 80

  # -- The secret used to sign the JWT tokens
  # @section -- Hoppscotch backend parameters
  jwtSecret: "secret"
  # -- Defines the complexity of the SALT that is used for hashing - a higher number implies a more complex salt
  # @section -- Hoppscotch backend parameters
  tokenSaltComplexity: 10
  # -- Duration of the validity of the magic link being sent to sign in to Hoppscotch (in days)
  # @section -- Hoppscotch backend parameters
  magicLinkTokenValidity: 3
  # -- Validity of the refresh token for auth (in ms)
  # @section -- Hoppscotch backend parameters
  refreshTokenValidity: "604800000"
  # -- Validity of the access token for auth (in ms)
  # @section -- Hoppscotch backend parameters
  accessTokenValidity: "86400000"
  ## -- The secret used to sign the session cookies
  # @section -- Hoppscotch backend parameters
  sessionSecret: ""

  # -- If disabled users will be able to use Hoppscotch over HTTP connections as well.
  # @section -- Hoppscotch backend parameters
  allowSecureCookies: true

  # -- A 32-character key used for encrypting sensitive data stored in the database
  # @section -- Hoppscotch backend parameters
  dataEncryptionKey: ""

  # -- This is a fallback URL to debug when the actual redirects fail
  # @section -- Hoppscotch backend parameters
  redirectUrl: ""

  # -- URLs of Hoppscotch backend, admin dashboard, frontend app and the bundle server that are allowed to interact with the desktop app
  # @section -- Hoppscotch backend parameters
  whitelistedOrigins: []

  # -- Allows you to specify which auth providers you want to enable
  # @section -- Hoppscotch backend parameters
  allowedAuthProviders:
    - email

  googleAuth:
    clientId: ""
    clientSecret: ""
    callbackUrl: ""
    scope: []

  githubAuth:
    clientId: ""
    clientSecret: ""
    callbackUrl: ""
    scope: []

  microsoftAuth:
    clientId: ""
    clientSecret: ""
    callbackUrl: ""
    scope: ""
    tenant: ""

  mailer:
    # -- Enables the SMTP mailer configuration
    # @section -- Hoppscotch backend parameters
    smtpEnabled: true
    # -- When custom mailer configurations are used
    # @section -- Hoppscotch backend parameters
    useCustomConfigs: false
    # -- The email address that you would be using
    # @section -- Hoppscotch backend parameters
    addressFrom: ""
    # -- The SMTP URL for email delivery
    # @section -- Hoppscotch backend parameters
    smtpUrl: ""
    # -- The SMTP host
    # @section -- Hoppscotch backend parameters
    smtpHost: ""
    # -- The port to connect to the SMTP server
    # @section -- Hoppscotch backend parameters
    smtpPort: 465
    smtpSecure: true
    # -- The SMTP user or email for authentication
    # @section -- Hoppscotch backend parameters
    smtpUser: ""
    # -- Provide the password set for the SMTP user
    smtpPassword: ""
    tlsRejectUnauthorized: true

  rateLimit:
    # -- The time it takes to refresh the maximum number of requests being received
    # @section -- Hoppscotch backend parameters
    ttl: 60
    # -- The maximum number of requests that Hoppscotch can handle under `backend.rateLimit.ttl`
    # @section -- Hoppscotch backend parameters
    max: 100

################################################################################
## Hoppscotch Enterprise parameters
################################################################################

enterprise:
  # -- The license key required to use Hoppscotch Enterprise
  # @section -- Hoppscotch Enterprise parameters
  licenseKey: ""

  frontend:
    # -- Enables a local proxy server for routing API requests. This will only work if `frontend.enableSubpathBasedAccess` is set to `true`.
    # @section -- Hoppscotch Enterprise parameters
    localProxyServerEnabled: false

    # -- Route all API requests via a proxy server for added security
    # @section -- Hoppscotch Enterprise parameters
    proxyAppUrl: ""

  backend:
    # -- Github Enterprise authorization configuration
    # @section -- Hoppscotch Enterprise parameters
    githubEnterpriseAuth:
      enabled: false
      authorizationUrl: ""
      tokenUrl: ""
      userProfileUrl: ""
      userEmailUrl: ""

    # -- SAML authorization configuration
    # @section -- Hoppscotch Enterprise parameters
    samlAuth:
      issuer: ""
      audience: ""
      callbackUrl: ""
      cert: ""
      entryPoint: ""
      wantAssertionsSigned: true
      wantResponseSigned: false

    # -- OpenID Connect (OIDC) authorization configuration
    # @section -- Hoppscotch Enterprise parameters
    oidcAuth:
      providerName: ""
      issuer: ""
      authorizationUrl: ""
      tokenUrl: ""
      userInfoUrl: ""
      clientId: ""
      clientSecret: ""
      callbackUrl: ""
      scope: []

    clickhouse:
      allowAuditLogs: false
      host: ""
      user: ""
      password: ""

    # -- Set to true to enable horizontal scaling, which uses Redis for managing pub-sub and state across instances
    # @section -- Hoppscotch Enterprise parameters
    horizontalScalingEnabled: false

    # -- The URL for the Redis instance used for horizontal scaling
    # @section -- Hoppscotch Enterprise parameters
    redisUrl: ""

################################################################################
## Database parameters
################################################################################

# PostgreSQL chart configuration
# ref: https://github.com/bitnami/charts/blob/main/bitnami/postgresql/values.yaml
postgresql:
  # -- Switch to enable or disable the PostgreSQL helm chart
  # @section -- Database parameters
  enabled: true
  auth:
    # -- Assign a password to the "postgres" admin user. Otherwise, remote access will be blocked for this user
    # @section -- Database parameters
    enablePostgresUser: true
    # -- Name for a custom user to create
    # @section -- Database parameters
    username: hoppscotch
    # -- Password for the custom user to create
    # @section -- Database parameters
    password: ""
    # -- Name for a custom database to create
    # @section -- Database parameters
    database: hoppscotch
    existingSecret: ""
  # -- PostgreSQL architecture (`standalone` or `replication`)
  # @section -- Database parameters
  architecture: standalone
  primary:
    # -- Set container resources according to one common preset (allowed values: none, nano, micro, small, medium, large, xlarge, 2xlarge). This is ignored if primary.resources is set (primary.resources is recommended for production).
    # @section -- Database parameters
    resourcesPreset: "nano"
    # -- Set container requests and limits for different resources like CPU or memory (essential for production workloads)
    # @section -- Database parameters
    resources: {}

# External PostgreSQL configuration
# All of these values are only used when postgresql.enabled is set to false
externalDatabase:
  # -- Database host (ignored if externalDatabase.sqlConnection is set)
  # @section -- Database parameters
  host: localhost
  # -- Database port number (ignored if externalDatabase.sqlConnection is set)
  # @section -- Database parameters
  port: 5432
  # -- Non-root username for Hoppscotch (ignored if externalDatabase.sqlConnection is set)
  # @section -- Database parameters
  user: hoppscotch
  # -- Hoppscotch database name (ignored if externalDatabase.sqlConnection is set)
  # @section -- Database parameters
  database: hoppscotch
  # -- Password for the non-root username for Hoppscotch (ignored if externalDatabase.sqlConnection or externalDatabase.existingSecret are set)
  # @section -- Database parameters
  password: ""
  # -- SQL connection string
  # @section -- Database parameters
  sqlConnection: ""
  # -- Name of an existing secret resource containing the database credentials
  # @section -- Database parameters
  existingSecret: ""
  # -- Name of an existing secret key containing the database credentials (ignored if externalDatabase.existingSecretSqlConnectionKey is set)
  # @section -- Database parameters
  existingSecretPasswordKey: ""
  # -- Name of an existing secret key containing the SQL connection string
  # @section -- Database parameters
  existingSecretSqlConnectionKey: ""
